{% extends 'base.html' %}
{% load static %}
{% block content %}
    <style>
        iframe {
            display: block;
            margin: auto auto;
            z-index: 999;

            border-radius: 2px;
            box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.27);
        }

        iframe.fullscreen {
            margin: 0;
            padding: 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;

            border-radius: 0;
            box-shadow: unset;
        }

        #fullscreen-btn {
            opacity: .5;
            border-radius: 15%;
            background-color: #f3f3f3;
            transition: opacity .15s linear;
        }

        #fullscreen-btn:hover {
            opacity: 1;
        }

        #fullscreen-btn.fullscreen {
            position: fixed;
            bottom: 1vmin;
            right: 1vmin;
            z-index: 9999;
        }
    </style>


    <div class="mt-4 container-fluid">
        <article class="card bg-transparent">
            <div class="card-header">
                {# display title #}
                <h1 class="card-title">{{ game.title }}
                    {% if user.id == game.user_id %}
                        <a href="{% url 'games_update' game.id %}" class="button btn btn-secondary float-end">Edit</a>
                    {% endif %}
                </h1>

                {# display creator #}
                <p class="text-sm-start">by {{ game.user.username }}</p>
            </div>

            {# display game window #}
            <div class="card-body overflow-auto">
                <iframe allowtransparency="false" loading="lazy" width="{{ game.frame_width }}" height="{{ game.frame_height }}" src="{{ game.url }}"></iframe>
                {% if game.add_fullscreen_btn %}
                    <button class="float-end btn btn-light" id="fullscreen-btn"><i class="bi bi-fullscreen"></i></button>
                {% endif %}
            </div>


            <div class="card-footer">


                <p class="float-end">
                    {# views #}
                    <span class="text-secondary me-2">Views {{ game.times_viewed }} </span>

                    {# hashtags #}
                    <strong>Tags: </strong>

                    {% for tag in game.tags.all %}
                        <span class="rounded bg-primary-subtle p-1 me-1">
                        <span class="hash">#</span>{{ tag.text }}
                    </span>
                    {% empty %}
                        <span>none.</span>
                    {% endfor %}
                </p>

                <h5>Description:</h5>
                <p style="white-space:pre-wrap;overflow-x:auto;width:100%;">{{ game.description }}</p>

            </div>

        </article>

    <h2 class="mt-4">Reviews</h2>
        {% include "review/reviews.html" %}
    </div>

    {% if game.add_fullscreen_btn %}
        <script src="{% static 'js/fullscreenToggle.js' %}"></script>
    {% endif %}

{% endblock %}